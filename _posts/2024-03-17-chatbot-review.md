---
created: 2024-03-17
title: 챗봇 프로젝트 리뷰
layout: post
tags: [project, chatbot]
category: 프로젝트
---



## 한 번 해볼까?

EKS 스터디 멤버들의 다음 목표가 생겼다. 바로 LangChain. EKS 스터디에서 AWS(특히 권한 문제)와 k8s를 동시에 공부하면서 하나 둘씩 지쳐갔던 스터디원들이 LLM의 매력에 다시 불이 붙었다. 사람의 노가다가 상당히 들어가야 하는 일을 코드 몇 줄, 프롬프트 몇 줄로 이뤄낼 수 있으니 다들 신기함에 박수 세례를 날렸다. 스터디의 후반부엔 사내 문제를 개선하기 위해 각자 서비스 아이디어를 기획하고 구현했다. 나는 이 과정에서 QA 자동화를 위한 간단한 Agent를 구현했는데, Agent를 위한 Tool을 모두 만들어야 한다는 한계는 있었지만 그저 재밌다는 말만 나왔다. 요즘 Agent로 포켓몬 대결을 한다던지, 심즈시티를 만든다던지 다양한 시도들이 있던데 확실히 앞으로의 발전이 기대된다.

어라, 근데 스터디에 대한 소문이 어디서 새나갔는지 어느새 나는 사내 챗봇 프로젝트 멤버 중 한 명이 되어 있었다. 아니, 왜죠?



## 노가다의 서막

목표는 교육 박람회에 전시할 챗봇 생성이었다. 챗봇을 구현하면서 가장 크게 느낀점은 챗봇이야 말로 진정한 노가다의 영역이라는 것이다! 이진 분류(binary classification) 모델을 생각해보자. 100개던 1,000,000개던 데이터 크기에 상관없이 모델을 돌려놓고, 메트릭을 확인하면 된다. 그러나 챗봇 응답의 퀄리티를 평가하기 위해선 하나하나 다 읽어봐야 한다. 물론 "응답을 10점 만점으로 평가해줘"와 같은 평가 프롬프트를 만들어, 다시 LLM을 태우는 방법도 있다. 하지만 LLM이 약세를 보이는 분야(대표적으로 수학)에선 해당 방법이 잘 먹히지 않는다는 것이 문제다. 좋아. 그렇다면 평가는 다른 사람에게 맡긴다.



## 테스트 서버 구성

기한은 짧고 인력은 부족한 상황이어서, 챗봇 프롬프팅과 챗봇 평가를 위한 테스트 서버는 홀로 구성하게 되었다. 간략한 구성 구조는 다음과 같다.

1. Langchain을 포함한 streamlit 서버를 도커라이즈하여 도커 이미지 생성
2. ECR에 푸시하여 EKS에 배포
3. 데이터는 RDS(MySQL)에 저장



## 프롬프팅에서 느낀점

 대부분의 시간(이지만 매우 짧은)을 보낸, **프롬프팅에 대해 느낀점**을 간단하게 적어본다.

1. ⭐️**<u>반드시 기획부터 시작해라</u>**⭐️. 챗봇 기능에 대한 정의가 불분명하면 기능을 구현할 때 표류하게 된다.
2. 사람에게 "코끼리를 생각하지 마세요!" 하면 코끼리가 생각나는 것처럼, LLM 또한 비슷한 경향을 보인다.
3. 발전은 쉽지만, 제약은 어렵다. 당장 ChatGPT에서 단순한 보라색 이모지 하트를 그릴 수 있는지 확인해 보면 된다.
4. 강한 제약을 위해선 뎁스(depth)에 대한 고민이 필요하다. 인텐트(intent), 엔티티(entity), RAG를 사용하면서 뎁스에 LLM기반 분류(classification) 레이어의 중요성을 알게 되었다.
5. LLM으로 생성한 검증 데이터셋엔 한계가 있다. 다양한 프롬프팅으로 검증 데이터를 구성하더라도 검증에서 발생하는 예측 오차는 감안해야 한다.
6. 사람이 이해하지 못하면 LLM도 이해하기 어려워한다. 프롬프팅은 구체적이고 명확하게 내려야한다. 
7. 1%의 쓰레기 데이터에 너무 목 매달지 말자. ~~(이상해씨앗나의실수박)~~ 



## 서버 구성 및 협업에서 느낀점

1. 실서버에 배포하는 개발자 분들의 코드를 보면서 <u>모듈화의 중요성</u>을 진심으로 느꼈다. 코드가 깔끔하지 않아 개발자 분이 복붙 노가다를 하셨다는 말씀을 뒤늦게 듣게 되었는데, 정말 죄송스럽고 속상했다. 아무리 바쁜 상황이어도 소통은 반드시 필요하다는 것을 다시 느꼈고, 먼저 물어보는 태도를 가져야겠다 생각했다. 또한 두 팀 사이의 협업을 위한 클린 코드에 대해 고민이 필요함을 느꼈다.
2. CI/CD의 필요성을 체감했다. 프롬프트와 추가와 같은 기능 수정마다 재배포를 해야했는데, 아무리 쉘 파일을 사용한다 해도 반복 또 반복이었다. 커밋만 때리면 자동으로 배포되는 CI/CD 구축, 공부 해야겠지?
3. 챗봇 기능 정의, DB 스키마 정의, 비동기 서버 구성 등 성공적인 프로젝트 진행을 위해선 내 분야에만 안주하지 않고 다양한 분야를 배워야 한다는 것을 다시금 느꼈다.



## 들어올 땐 마음대로지만 나갈 땐 아니란다

박람회가 끝나고 스탑될 줄 알았던 챗봇 프로젝트는 지속적으로 몸집을 부풀리는 중이다. 데이터 검증 인력들이 충원되고, 구체적인 챗봇 개발 프로세스를 수립하고, 검증을 위한 대시보드도 생성하고. 이쯤되니 어려운 건 프롬프팅이나 서버 구현이 아닌, 전체적인 프로세스를 기획하고 협업하는 과정이다. 제한된 리소스~~(프로젝트 기한은 왜 항상 이렇게 촉박한거죠)~~를 어떻게 분배하여 가장 효율적인 마무리를 할 것인가에 대한 고민과 결정도 필요하다. 

알파 버전의 챗봇 서비스를 준비중인데, 이전보다 조금 더 나은 서비스를 위해 다시 달려야겠다 🥕🥕🥕 









